<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>iPod Classic Replica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsmediatags@3.9.7/dist/jsmediatags.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <!-- Placeholder for J2ME Emulator Library -->
    <script src="https://unpkg.com/j2me.js/dist/j2me.js"></script>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
<style>
  :root {
    /* Dimensions */
    --ipod-w-portrait: 22.5;
    --ipod-h-portrait: 37.5;
    --ipod-w-landscape: 39.5; 
    --ipod-h-landscape: 18.25;

    /* THEME: Classic */
    --ipod-bg-gradient: linear-gradient(to bottom, #e5e7eb, #9ca3af);
    --ipod-border-color: #6b7280;
    --screen-bezel-bg: #4b5563;
    --screen-bezel-border: #1f2937;
    --screen-bg: #cdd3d8;
    --statusbar-bg-gradient: linear-gradient(to bottom, #d1d5db, #9ca3af);
    --statusbar-border-color: #6b7280;
    --statusbar-text-color: black;
    --menu-bg: white;
    --menu-text-color: black;
    --menu-subtext-color: #6b7280;
    --menu-active-bg-gradient: linear-gradient(to bottom, #60a5fa, #2563eb);
    --menu-active-text-color: white;
    --menu-active-subtext-color: #d1d5db;
    --menu-border-color: #e5e7eb;
    --wheel-bg: #4D555D;
    --wheel-icon-color: #ADB2B7;
    --center-button-bg: white;
    --center-button-border: white;
    --gamepad-shoulder-bg: #6b7280;
    --gamepad-shoulder-active-bg: #4b5563;
    --gamepad-dpad-icon-color: #9ca3af;
    --gamepad-dpad-icon-active-color: white;
    --now-playing-bg-gradient: linear-gradient(to bottom, #f3f4f6, #d1d5db);
    --now-playing-text-primary: black;
    --now-playing-text-secondary: #4b5563;
    --now-playing-text-tertiary: #6b7280;
  }
  
  .theme-dark {
    --ipod-bg-gradient: linear-gradient(to bottom, #1a1a1a, #0d0d0d);
    --ipod-border-color: #333;
    --screen-bezel-bg: #000;
    --screen-bezel-border: #222;
    --wheel-bg: #c53030;
    --wheel-icon-color: white;
    --center-button-bg: #111;
    --center-button-border: #c53030;
    --gamepad-shoulder-bg: #4a5568;
    --gamepad-shoulder-active-bg: #2d3748;
    --gamepad-dpad-icon-color: #a0aec0;
    --gamepad-dpad-icon-active-color: #e53e3e;
  }

  .theme-gold {
    --ipod-bg-gradient: linear-gradient(to bottom, #fffbeb, #fde68a);
    --ipod-border-color: #d97706;
    --screen-bezel-bg: white;
    --screen-bezel-border: #fef3c7;
    --wheel-bg: white;
    --wheel-icon-color: #f59e0b;
    --center-button-bg: linear-gradient(to bottom, #fcd34d, #f59e0b);
    --center-button-border: white;
    --gamepad-shoulder-bg: #fbbf24;
    --gamepad-shoulder-active-bg: #f59e0b;
    --gamepad-dpad-icon-color: #fbbf24;
    --gamepad-dpad-icon-active-color: #d97706;
  }

  html {
    font-size: min(calc(100vw / var(--ipod-w-portrait)), calc(100svh / var(--ipod-h-portrait)));
  }

  .ipod-container {
    width: 22.5rem;
    height: 100%;
    background-image: var(--ipod-bg-gradient);
    border-radius: 1.5rem;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    border: 2px solid var(--ipod-border-color);
  }

  .ipod-body {
    width: 100%;
  }

  .resizable-area {
    cursor: default;
    touch-action: none;
    user-select: none;
  }
  
  @media (orientation: landscape) {
    html {
      font-size: min(calc(100vw / var(--ipod-w-landscape)), calc(100svh / var(--ipod-h-landscape)));
    }
    
    .ipod-container {
      width: var(--ipod-w-landscape)rem;
      height: var(--ipod-h-landscape)rem;
      flex-direction: row;
      justify-content: center;
      gap: 2rem;
    }

    .ipod-body {
      width: 20.5rem;
      margin-bottom: 0;
    }
  }

  @media (orientation: portrait) {
    .resizable-area {
      cursor: ns-resize;
    }
  }

  body {
    height: 100vh;
    height: 100svh;
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    box-sizing: border-box;
    background-color: #f3f4f6;
  }
  .theme-dark body { background-color: #111827; }
  .theme-gold body { background-color: #fffbeb; }

  /* Camera Animations */
  @keyframes flash-animation {
    0% { opacity: 0.7; }
    100% { opacity: 0; }
  }
  .animate-flash {
    animation: flash-animation 0.2s ease-out;
  }

  @keyframes vhs-grain-animation {
    0%, 100% { transform: translate(0, 0); }
    10% { transform: translate(-1%, -1%); }
    20% { transform: translate(1%, 1%); }
    30% { transform: translate(-1.5%, 1.5%); }
    40% { transform: translate(1.5%, -1.5%); }
    50% { transform: translate(-1%, 1%); }
    60% { transform: translate(1%, -1%); }
    70% { transform: translate(-1.5%, -1.5%); }
    80% { transform: translate(1.5%, 1.5%); }
    90% { transform: translate(-1%, 1.5%); }
  }
  .vhs-overlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAXFJREFUaAXt1rFKA1EQxvFfR4tYpIj1A1iI4PQCihcQvEBRxPsmCCpm4w+w0VZBwVpEjxHE3sBCFAuvsLMjzsxmc/dMZOLL3T3M5IfZzYQgBCEI4X/ApZpWGLjg8TqN4uwoRTv0bNMkxuF94t+8L39xR3+wB6s8F03wG66vKDK1F2TE8M0cT+sM3BCTzFOT0zQn8zT9hB2Y55jmkWaZpRlUnS5M0iwpI8zT33AlL/GfJ+k8yT5JjifJ8rJ82/JAlPOlI7tK0k3JJlG8R+003TpxklyTTJpknGTbJO0myS9J1kkyTLJrlL0lGS9JZkTSRZS9JZkrSRZJ0k2SppJ8kGSSZKUkGSSZJUk4yS5JskkyUbSCZKUkWSSZJUkYyS5JskmyRpJ0kWSjJIkkWRjJIkkWSLJFknSSpK0kWSDJCMkySjJJkkWSbJOkkyQZJUkoyQbJElzS/6r9i94EIXwN+ABNlF2uMAfSCoAAAAASUVORK5CYII=');
    opacity: 0.1;
    animation: vhs-grain-animation 0.2s steps(2, end) infinite;
  }
  .vhs-overlay::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 2px;
    background: rgba(255, 255, 255, 0.3);
    animation: vhs-scanline 4s linear infinite;
  }

  @keyframes vhs-scanline {
    0% { transform: translateY(0); }
    100% { transform: translateY(100vh); }
  }

</style>
</head>
  <body class="flex items-stretch justify-center">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>